:original_name: ListIgnoreRules.html

.. _ListIgnoreRules:

Querying the False Alarm Masking Rule List
==========================================

Function
--------

This API is used to query the list of false alarm masking rules.

URI
---

GET /v1/{project_id}/waf/policy/{policy_id}/ignore

.. table:: **Table 1** Path Parameters

   ========== ========= ====== ===========
   Parameter  Mandatory Type   Description
   ========== ========= ====== ===========
   project_id Yes       String Project ID
   policy_id  Yes       String Policy ID
   ========== ========= ====== ===========

.. table:: **Table 2** Query Parameters

   +-----------------+-----------------+-----------------+------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                      |
   +=================+=================+=================+==================================================================+
   | page            | No              | Integer         | Page                                                             |
   |                 |                 |                 |                                                                  |
   |                 |                 |                 | Default: **1**                                                   |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------+
   | pagesize        | No              | Integer         | Number of records on each page. The maximum value is 2147483647. |
   |                 |                 |                 |                                                                  |
   |                 |                 |                 | Default: **10**                                                  |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +-----------------+-----------------+-----------------+--------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                |
   +=================+=================+=================+============================================+
   | X-Auth-Token    | Yes             | String          | User token                                 |
   +-----------------+-----------------+-----------------+--------------------------------------------+
   | Content-Type    | No              | String          | Content type                               |
   |                 |                 |                 |                                            |
   |                 |                 |                 | Default: **application/json;charset=utf8** |
   +-----------------+-----------------+-----------------+--------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +-----------+-----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------+
   | Parameter | Type                                                                              | Description                                                                                              |
   +===========+===================================================================================+==========================================================================================================+
   | total     | Integer                                                                           | The number of global protection whitelist (formerly false alarm masking) rules in the protection policy. |
   +-----------+-----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------+
   | items     | Array of :ref:`IgnoreRuleBody <listignorerules__response_ignorerulebody>` objects | Domain names the global protection whitelist (formerly false alarm masking) rule is used for.            |
   +-----------+-----------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------+

.. _listignorerules__response_ignorerulebody:

.. table:: **Table 5** IgnoreRuleBody

   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                    | Description                                                                                                                                                                                                                                                                                                                                                                                                    |
   +=======================+=========================================================================+================================================================================================================================================================================================================================================================================================================================================================================================================+
   | id                    | String                                                                  | Rule ID                                                                                                                                                                                                                                                                                                                                                                                                        |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | policyid              | String                                                                  | ID of the protection policy that includes the rule                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | timestamp             | Long                                                                    | Timestamp the rule was created.                                                                                                                                                                                                                                                                                                                                                                                |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | String                                                                  | Rule description                                                                                                                                                                                                                                                                                                                                                                                               |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | Integer                                                                 | Rule status. The value can be **0** or **1**.                                                                                                                                                                                                                                                                                                                                                                  |
   |                       |                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                                                         | -  **0**: The rule is disabled.                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                                                         | -  **1**: The rule is enabled.                                                                                                                                                                                                                                                                                                                                                                                 |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | rule                  | String                                                                  | Items to be masked. You can provide multiple items and separate them with semicolons (;).                                                                                                                                                                                                                                                                                                                      |
   |                       |                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                                                         | -  If you want to disable a specific built-in rule for a domain name, the value of this parameter is the rule ID. When requests are blocked against a certain built-in rule while you do not want this rule to block requests later, you can query the rule in the **Events** page on the console and find its rule ID in the **Hit Rule** column. Then, you can disk the rule by its ID (including 6 digits). |
   |                       |                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                                                         | -  If you want to mask a type of basic web protection rules, set this parameter to the name of the type of basic web protection rules. **xss**: XSS attacks **webshell**: Web shells **vuln**: Other types of attacks **sqli**: SQL injection attack **robot**: Malicious crawlers **rfi**: Remote file inclusion **lfi**: Local file inclusion **cmdi**: Command injection attack                             |
   |                       |                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                                                         | -  To bypass the basic web protection, set this parameter to **all**.                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                                                         | -  To bypass all WAF protection, set this parameter to **bypass**.                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | mode                  | Integer                                                                 | The value is fixed at **1**, indicating v2 false alarm masking rules.                                                                                                                                                                                                                                                                                                                                          |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | conditions            | Array of :ref:`Condition <listignorerules__response_condition>` objects | Condition list                                                                                                                                                                                                                                                                                                                                                                                                 |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | domain                | Array of strings                                                        | Protecting Domain Names or Protecting Websites                                                                                                                                                                                                                                                                                                                                                                 |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | advanced              | Array of :ref:`Advanced <listignorerules__response_advanced>` objects   | Advanced settings                                                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------+-------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listignorerules__response_condition:

.. table:: **Table 6** Condition

   +-------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter               | Type             | Description                                                                                                                                                                                                                                                                                                                                         |
   +=========================+==================+=====================================================================================================================================================================================================================================================================================================================================================+
   | category                | String           | Field type. The value can be **ip**, **url**, **params**, **cookie**, or **header**.                                                                                                                                                                                                                                                                |
   +-------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | contents                | Array of strings | Content. The array length must be 1. The content format varies depending on field types. For example, if the field type is ip, the value must be an IP address or IP address range. If the field type is url, the value must be a URL in standard format. If the field type is params, cookie, or header, the content format is not limited.        |
   +-------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | logic_operation         | String           | The matching logic varies depending on the field type. For example, if the field type is **ip**, the logic can be **equal** or **not_equal**. If the field type is **url**, **params**, **cookie**, or **header**, the logic can be **equal**, **not_equal**, **contain**, **not_contain**, **prefix**, **not_prefix**, **suffix**, **not_suffix**. |
   +-------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | check_all_indexes_logic | Integer          | This parameter is reserved and can be ignored.                                                                                                                                                                                                                                                                                                      |
   +-------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | index                   | String           | If the field type is **ip** and the subfield is the client IP address, the **index** parameter does not exist. If the subfield type is **X-Forwarded-For**, the value is **x-forwarded-for**. If the field type is **params**, **header**, or **cookie**, and the subfield is user-defined, the value of **index** is the user-defined subfield.    |
   +-------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listignorerules__response_advanced:

.. table:: **Table 7** Advanced

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                         |
   +=======================+=======================+=====================================================================================================================================+
   | index                 | String                | Field type. The following field types are supported: Params, Cookie, Header, Body, and Multipart.                                   |
   |                       |                       |                                                                                                                                     |
   |                       |                       | -  When you select **Params**, **Cookie**, or **Header**, you can set this parameter to **all** or configure subfields as required. |
   |                       |                       |                                                                                                                                     |
   |                       |                       | -  When you select **Body** or **Multipart**, set this parameter to **all**.                                                        |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | contents              | Array of strings      | Subfield of the specified field type. The default value is **all**.                                                                 |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------+

**Status code: 400**

.. table:: **Table 8** Response body parameters

   ========== ====== =============
   Parameter  Type   Description
   ========== ====== =============
   error_code String Error code
   error_msg  String Error message
   ========== ====== =============

**Status code: 401**

.. table:: **Table 9** Response body parameters

   ========== ====== =============
   Parameter  Type   Description
   ========== ====== =============
   error_code String Error code
   error_msg  String Error message
   ========== ====== =============

**Status code: 500**

.. table:: **Table 10** Response body parameters

   ========== ====== =============
   Parameter  Type   Description
   ========== ====== =============
   error_code String Error code
   error_msg  String Error message
   ========== ====== =============

Example Requests
----------------

.. code-block:: text

   GET https://{Endpoint}/v1/{project_id}/waf/policy/{policy_id}/ignore?

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "total" : 1,
     "items" : [ {
       "id" : "40484384970948d79fffe4e4ae1fc54d",
       "policyid" : "f385eceedf7c4c34a4d1def19eafbe85",
       "timestamp" : 1650512535222,
       "description" : "demo",
       "status" : 1,
       "rule" : "091004",
       "mode" : 1,
       "conditions" : [ {
         "category" : "ip",
         "contents" : [ "x.x.x.x" ],
         "logic_operation" : "equal"
       } ],
       "domain" : [ "www.example.com" ]
     } ]
   }

Status Codes
------------

=========== =============================================
Status Code Description
=========== =============================================
200         OK
400         Request failed.
401         The token does not have required permissions.
500         Internal server error.
=========== =============================================

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
